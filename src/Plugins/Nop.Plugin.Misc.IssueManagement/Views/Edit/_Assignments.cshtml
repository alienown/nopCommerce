@using Nop.Plugin.Misc.IssueManagement.Models
@using Nop.Web.Framework.Models.DataTables
@using Nop.Plugin.Misc.IssueManagement.Domain

@model IssueAssignmentSearchModel

@{
    var gridModel = new DataTablesModel
    {
        Name = "assignments-grid",
        UrlRead = new DataUrl("IssueAssignmentList", "Issue", null),
        Length = Model.PageSize,
        LengthMenu = Model.AvailablePageSizes,
    };
    gridModel.ColumnCollection.Add(new ColumnProperty("ObjectInfo")
    {
        Title = T("Plugins.Misc.IssueManagement.Edit.AssignmentsPanel.Grid.Columns.Assignment").Text,
        Render = new RenderCustom("renderObjectInfo"),
    });
    gridModel.ColumnCollection.Add(new ColumnProperty(nameof(IssueGridItemModel.Id))
    {
        Title = T("Admin.Common.Delete").Text,
        ClassName = NopColumnClassDefaults.Button,
        Render = new RenderButtonRemove(T("Admin.Common.Delete").Text),
        Width = "100"
    });
}

<div class="panel-body">
    @await Html.PartialAsync("Table", gridModel)
</div>

<script>
    function renderObjectInfo(data, type, row, meta) {
        var template = '';

        switch (row.AssignmentType) {
            case @((byte)IssueAssignmentType.Product):
                template += '<span>' + row.ProductInfo.Name + '</span>';
                break;
            default:
                break;
        }

        return template;
    }
</script>